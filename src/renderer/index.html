<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'self' 'unsafe-inline' 'unsafe-eval' file: data: blob:;" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CompIDE ‚Äî Competitive Programming IDE</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="theme-dark">

  <!-- ‚îÄ‚îÄ Title Bar ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <div id="titlebar">
    <div id="titlebar-drag"></div>
    <div id="titlebar-info">
      <span id="lang-badge" class="badge">Java</span>
      <span id="file-name">untitled.java</span>
    </div>
    <div id="titlebar-actions">
      <button id="btn-run" class="btn-primary" title="Run (‚åò‚Üµ)">‚ñ∂ Run</button>
      <button id="btn-run-input" class="btn-secondary" title="Run with custom input (‚åò‚áß‚Üµ)">‚å• Input</button>
      <button id="btn-run-tests" class="btn-secondary" title="Run all tests (‚åòT)">üß™ Tests</button>
      <button id="btn-stop" class="btn-danger" title="Stop (‚åò.)">‚ñ† Stop</button>
      <button id="btn-settings" class="btn-icon" title="Settings (‚åò,)">‚öô</button>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ Main Layout ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <div id="main-layout">

    <!-- Sidebar -->
    <aside id="sidebar">
      <div class="sidebar-section">
        <div class="sidebar-title">LANGUAGE</div>
        <select id="lang-select">
          <option value="java">‚òï Java</option>
          <option value="cpp">‚ö° C++</option>
          <option value="python">üêç Python</option>
        </select>
      </div>

      <div class="sidebar-section">
        <div class="sidebar-title">TEMPLATES</div>
        <div id="template-list">
          <button class="template-btn" data-template="java-usaco">USACO Java</button>
          <button class="template-btn" data-template="cpp-usaco">USACO C++</button>
          <button class="template-btn" data-template="java-dp">DP Template</button>
          <button class="template-btn" data-template="cpp-graph">Graph Template</button>
          <button class="template-btn" data-template="java-scanner">Fast Scanner</button>
          <button class="template-btn" data-template="cpp-segment">Segment Tree</button>
        </div>
      </div>

      <div class="sidebar-section">
        <div class="sidebar-title">RECENT FILES</div>
        <div id="recent-files-list"></div>
      </div>

      <div class="sidebar-section">
        <div class="sidebar-title">BUNDLE STATUS</div>
        <div class="sidebar-inline-actions">
          <button class="tool-btn sidebar-mini-btn" id="btn-refresh-bundles" title="Refresh runtime detection">‚Üª</button>
        </div>
        <div id="bundle-status">
          <div class="bundle-item" id="bundle-java">
            ‚òï Java: <span>checking‚Ä¶</span>
            <div class="bundle-meta"></div>
          </div>
          <div class="bundle-item" id="bundle-cpp">
            ‚ö° C++: <span>checking‚Ä¶</span>
            <div class="bundle-meta"></div>
          </div>
          <div class="bundle-item" id="bundle-python">
            üêç Python: <span>checking‚Ä¶</span>
            <div class="bundle-meta"></div>
          </div>
        </div>
      </div>

      <div class="sidebar-section">
        <div class="sidebar-title">WORKSPACE</div>
        <div class="sidebar-inline-actions">
          <button class="tool-btn sidebar-mini-btn" id="btn-refresh-repo" title="Refresh git status">‚Üª</button>
          <button class="tool-btn sidebar-mini-btn" id="btn-open-remote" title="Open remote URL">‚Üó</button>
        </div>
        <div id="repo-status">
          <div id="repo-branch">No git repo</div>
          <div id="repo-dirty"></div>
          <div id="repo-root"></div>
        </div>
      </div>

      <div class="sidebar-section">
        <div class="sidebar-title">VSCODE IMPORT</div>
        <div id="vscode-import-summary">
          <span id="vscode-import-count">0 snippets</span>
          <button class="tool-btn sidebar-mini-btn" id="btn-import-vscode-ext" title="Import unpacked VSCode extension folder">+ Import</button>
        </div>
        <div id="vscode-imports-list"></div>
      </div>
    </aside>

    <!-- Center Content -->
    <div id="center-content">

      <!-- Editor + IO split -->
      <div id="editor-io-split">

        <!-- Editor pane -->
        <div id="editor-pane">
          <div id="editor-toolbar">
            <span class="toolbar-label">Editor</span>
            <div class="toolbar-actions">
              <button class="tool-btn" id="btn-open" title="Open file">üìÇ</button>
              <button class="tool-btn" id="btn-save" title="Save file">üíæ</button>
              <button class="tool-btn" id="btn-format" title="Format code">‚ú®</button>
            </div>
          </div>
          <div id="monaco-editor"></div>
        </div>

        <!-- Resize handle -->
        <div id="resize-handle-v" class="resize-handle resize-v"></div>

        <!-- IO pane -->
        <div id="io-pane">
          <!-- Tabs -->
          <div id="io-tabs">
            <button class="io-tab active" data-tab="output">Output</button>
            <button class="io-tab" data-tab="input">Input</button>
            <button class="io-tab" data-tab="tests">Test Cases</button>
          </div>

          <!-- Output tab -->
          <div id="tab-output" class="io-tab-content active">
            <div id="output-toolbar">
              <span id="run-status" class="status-idle">Ready</span>
              <span id="run-time"></span>
              <button class="tool-btn" id="btn-clear-output" title="Clear output">üóë</button>
              <button class="tool-btn" id="btn-copy-output" title="Copy output">üìã</button>
            </div>
            <pre id="output-area"></pre>
          </div>

          <!-- Input tab -->
          <div id="tab-input" class="io-tab-content">
            <div id="input-toolbar">
              <span class="toolbar-label">Custom Input</span>
              <button class="tool-btn" id="btn-clear-input" title="Clear input">üóë</button>
            </div>
            <textarea id="input-area" placeholder="Type or paste input here‚Ä¶" spellcheck="false"></textarea>
          </div>

          <!-- Tests tab -->
          <div id="tab-tests" class="io-tab-content">
            <div id="tests-toolbar">
              <span class="toolbar-label">Test Cases</span>
              <button class="tool-btn" id="btn-add-test" title="Add empty test">+ Add</button>
              <button class="tool-btn" id="btn-paste-test" title="Paste sample from clipboard (auto-detects Input/Output)">üìã Paste</button>
              <button class="tool-btn btn-primary-sm" id="btn-run-all-tests">‚ñ∂ Run All</button>
            </div>
            <div id="test-cases-container"></div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ Settings Modal ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
  <div id="settings-overlay" class="modal-overlay hidden">
    <div id="settings-modal" class="modal">
      <div class="modal-header">
        <h2>Settings</h2>
        <button class="modal-close" id="btn-settings-close">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="settings-section">
          <h3>Appearance</h3>
          <label>Theme
            <select id="setting-theme">
              <option value="dark">Dark</option>
              <option value="light">Light</option>
              <option value="hc-black">High Contrast</option>
            </select>
          </label>
          <label>Font Size
            <input type="number" id="setting-font-size" min="10" max="28" />
          </label>
        </div>
        <div class="settings-section">
          <h3>Editor</h3>
          <label>Tab Size
            <input type="number" id="setting-tab-size" min="2" max="8" />
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="setting-line-numbers" /> Show Line Numbers
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="setting-word-wrap" /> Word Wrap
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="setting-minimap" /> Minimap
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="setting-format-on-save" /> Format on Save
          </label>
        </div>
        <div class="settings-section">
          <h3>Execution</h3>
          <label>Time Limit (ms)
            <input type="number" id="setting-time-limit" min="100" max="30000" step="100" />
          </label>
          <label>Memory Limit (MB)
            <input type="number" id="setting-memory-limit" min="32" max="1024" step="32" />
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="setting-usaco-mode" /> Enable USACO file mode
          </label>
          <label>USACO Problem Base Name
            <input type="text" id="setting-usaco-problem" placeholder="problem" />
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="setting-usaco-file-input" /> Use &lt;problem&gt;.in when custom input is empty
          </label>
        </div>
        <div class="settings-section">
          <h3>Language Paths</h3>
          <label class="checkbox-label">
            <input type="checkbox" id="setting-auto-pick-bundle" /> Auto pick best installed bundle
          </label>
          <label>Java Binary (leave blank for auto)
            <input type="text" id="setting-java-path" placeholder="e.g. /usr/bin/java" />
          </label>
          <label>Javac Binary (leave blank for auto)
            <input type="text" id="setting-javac-path" placeholder="e.g. /usr/bin/javac" />
          </label>
          <label>C++ Compiler
            <input type="text" id="setting-cpp-compiler" placeholder="g++ / clang++ / cl" />
          </label>
          <label>Python Binary
            <input type="text" id="setting-python-path" placeholder="python3 or py -3" />
          </label>
        </div>
      </div>
      <div class="modal-footer">
        <button id="btn-settings-save" class="btn-primary">Save Settings</button>
        <button id="btn-settings-cancel" class="modal-close-btn">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Monaco loader -->
  <script>
    // Set Monaco base path so it can load its workers from node_modules
    window.monacoBasePath = '../../../node_modules/monaco-editor/min/vs';
  </script>
  <script src="../../../node_modules/monaco-editor/min/vs/loader.js"></script>
  <script>
    require.config({ paths: { vs: window.monacoBasePath } });
  </script>
  <script src="app.js"></script>
</body>
</html>
